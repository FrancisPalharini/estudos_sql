CREATE OR REPLACE FUNCTION FUNC_CADASTRAR_NOVO_CURSO (P_COD_CURSO IN NUMBER, P_NOME_CURSO IN VARCHAR)
RETURN NUMBER

IS
    RETORNO NUMBER(4);
    V_QTDE NUMBER(1);

BEGIN
    IF LENGTH(P_COD_CURSO) < 3 THEN
        IF LENGTH(P_NOME_CURSO) <120 THEN
            SELECT COUNT(*) INTO V_QTDE FROM CURSO  WHERE COD_CURSO = P_COD_CURSO;
                IF V_QTDE =1 THEN
                    SELECT COUNT(*) INTO V_QTDE FROM CURSO  WHERE NOME = P_NOME_CURSO;
                        IF V_QTDE =1 THEN
                            INSERT INTO CURSO (COD_CURSO, NOME) VALUES (P_COD_CURSO, P_NOME_CURSO);
                            RETORNO := 0; -- CURSO CADASTRADO
                        ELSE
                        RETORNO:= 996; -- NOME CURSO JÁ EXISTE
                        END IF;

                ELSE
                RETORNO := 997; -- COD CURSO JÁ EXISTE
                END IF;
        ELSE
        RETORNO := 998; -- NOME CURSO MAIOR QUE CAMPO
        END IF;
    ELSE
    RETORNO := 999; -- COD CURSO MAIOR QUE O CAMPO
    END IF;




COMMIT;
RETURN RETORNO;
EXCEPTION
    WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('----- ERRO -----');
    DBMS_OUTPUT.PUT_LINE('CODIGO DO ERRO: ' || SQLCODE);
    DBMS_OUTPUT.PUT_LINE('DESCRICAO DO ERRO: ' || SQLERRM);
    ROLLBACK;
    RETURN SQLCODE;
END;
